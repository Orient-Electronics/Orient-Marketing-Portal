  <h1><i class="icon-inbox"></i> Display Report</h1>
    <textarea class="hide display_data">
      <% brands.each do |brand| %>
        <%= [brand.name,Report.brand_display(reports,brand.id)].join("|") %>
        <%= "~" unless brand == brands.last %>
      <% end -%>
    </textarea>
    <div class="row">
      <div class="span12 jchartfx" style="height: 400px; display: inline-block;" data-unit="display_data">
      </div>
    </div>
  <h1><i class="icon-share-alt"></i> Sales Report</h1>
    <textarea class="hide sales_data">
      <% brands.each do |brand| %>
        <%= [brand.name,Report.brand_sales(reports,brand.id)].join("|") %>
        <%= "~" unless brand == brands.last %>
      <% end -%>
    </textarea>
    <div class="row">
      <div class="span12 jchartfx" style="height: 400px; display: inline-block;" data-unit="sales_data">
      </div>
    </div>
  <h1><i class="icon-tag"></i> Display Corner</h1>
    <textarea class="hide corner_data">
      <% brands.each do |brand| %>
        <%= [brand.name,Report.brand_corner(reports,brand.id)].join("|") %>
        <%= "~" unless brand == brands.last %>
      <% end -%>
    </textarea>
    <div class="row">
      <div class="span12 jchartfx" style="height: 400px; display: inline-block;" data-unit="corner_data">
      </div>
    </div>


<%= content_for :footer_js do %>
<script type="text/javascript">
  window.onload = function () {
    $('.jchartfx').each(function(){
      onLoadDoc($(this));  
    });
  }

  function onLoadDoc(div) {
    chart1 = new cfx.Chart();chart1.getAnimations().getLoad().setEnabled(true);
    chart1.setGallery(cfx.Gallery.Bar);
    
    chart1.getDataGrid().setVisible(true);
    chart1.getLegendBox().setVisible(false);
        
        
    doTitle(chart1, "Display Report");
    doDataPopulation(div.data('unit'));
    
    var allSeries = chart1.getAllSeries();
    allSeries.setMarkerShape(cfx.MarkerShape.Rect);
        var chartDiv = div[0];
        chart1.create(chartDiv);

  }

  //Chart title settings
  function doTitle(chart, text) {
      var td;
      td = new cfx.TitleDockable();
      td.setText(text);
      td.setDock(cfx.DockArea.Top);
      chart.getTitles().add(td);
  }

  //Main Chart Data Information
  function doDataPopulation(unit) {
      var data1 = $('.' + unit).val().split("~");
      var items = [];
      for(i=0;i<data1.length;i++){
        temp = data1[i].trim().split("|");
        temp1 = {
        "Brand": temp[0],
            "Quantity": parseInt(temp[1])
        };
        items.push(temp1);
      }
      chart1.setDataSource(items);
  }

</script>
<% end -%>