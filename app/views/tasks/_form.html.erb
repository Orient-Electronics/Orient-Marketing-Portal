<%= form_for @task,:html => { :class => 'form-horizontal task_form form-validate' } do |f| %>
  
  <div class= "error-box">
    <p><%= errors_for(@task, "").html_safe %></p>
  </div>
  <div class="control-group">
    <div class="controls">
      <%= f.hidden_field :assigned_by, :value=> current_user.id  %>
    </div>
  </div>
  <div class="control-group">
      <%= f.label :assigned_to,"Assigned to", :class => 'control-label' %>
      <div class="controls">
        <%= f.collection_select :assigned_to, User.all,:id,:name, include_blank: true %>
      </div>
  </div>
  <div class="control-group">
      <%= f.label :comment,"Comment", :class => 'control-label' %>
      <div class="controls">
          <%= f.text_area :comment, :class => 'text_area required' %>
      </div>
  </div>
  <div class="control-group">
    <%= f.label :shop_id,"Shop", :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :shop_name, :class => 'text_field typeahead required' %>
    </div>
  </div>    
  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
      <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                  tasks_path, :class => 'btn' %>
  </div>
<% end %>
<script type="text/javascript" charset="utf-8">

  $('document').ready(function () {
    $('.typeahead').typeahead({                                
      name: 'shops',
      local: '<%= Shop.all.collect{|c| c.dealer_name}.join("*") %>'.split("*"),
      limit: 10                                                                   
    });
  });

</script>